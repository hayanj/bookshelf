{"ast":null,"code":"var _jsxFileName = \"/Users/hayaaljuraysi/class-demo/bookshelf/frontend/src/App.js\";\nimport React, { Component } from 'react';\nimport $ from 'jquery';\nimport './stylesheets/App.css';\nimport FormView from './components/FormView';\nimport Book from './components/Book';\nclass App extends Component {\n  constructor(props) {\n    super();\n    this.getBooks = () => {\n      $.ajax({\n        url: `/books?page=${this.state.page}`,\n        //TODO: update request URL\n        type: \"GET\",\n        success: result => {\n          this.setState({\n            totalBooks: result.total_books,\n            books: result.books\n          });\n          return;\n        },\n        error: error => {\n          alert('Unable to load books. Please try your request again');\n          return;\n        }\n      });\n    };\n    this.deleteBook = id => {\n      if (window.confirm('Are you sure you want to delete the book?')) {\n        $.ajax({\n          url: `/books/${id}`,\n          //TODO: update request URL\n          type: \"DELETE\",\n          success: result => {\n            this.getBooks();\n          },\n          error: error => {\n            alert('Unable to delete the book.');\n            return;\n          }\n        });\n      }\n    };\n    this.changeRating = (id, rating) => {\n      let books = [...this.state.books];\n      let targetBook = books.find(book => book.id === id);\n      $.ajax({\n        url: `/books/${id}`,\n        //TODO: update request URL\n        type: \"PATCH\",\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify({\n          'rating': rating\n        }),\n        success: result => {\n          targetBook.rating = rating;\n          this.setState({\n            books\n          });\n        },\n        error: error => {\n          alert('Unable to update the rating.');\n          return;\n        }\n      });\n    };\n    this.searchBooks = search => {\n      $.ajax({\n        url: '/books',\n        //TODO: update request URL\n        type: \"POST\",\n        dataType: 'json',\n        contentType: 'application/json',\n        data: JSON.stringify({\n          search: search\n        }),\n        xhrFields: {\n          withCredentials: true\n        },\n        crossDomain: true,\n        success: result => {\n          this.setState({\n            totalBooks: result.total_books,\n            books: result.books,\n            page: 1\n          });\n          document.getElementById(\"search-form\").reset();\n          return;\n        },\n        error: error => {\n          alert('Unable to complete search. Please try your request again');\n          return;\n        }\n      });\n    };\n    this.state = {\n      page: 1,\n      totalBooks: 0,\n      books: []\n    };\n  }\n  componentDidMount() {\n    this.getBooks();\n  }\n  selectPage(num) {\n    this.setState({\n      page: num\n    }, () => this.getBooks());\n  }\n  createPagination() {\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalBooks / 8);\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push( /*#__PURE__*/React.createElement(\"div\", {\n        key: i,\n        className: `page-num ${i === this.state.page ? 'active' : ''}`,\n        onClick: () => {\n          this.selectPage(i);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 9\n        }\n      }, i));\n    }\n    return pageNumbers;\n  }\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      id: \"main-view\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"bookshelf-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }\n    }, this.state.books.map(book => /*#__PURE__*/React.createElement(Book, Object.assign({\n      key: book.id,\n      deleteBook: this.deleteBook,\n      changeRating: this.changeRating\n    }, book, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 15\n      }\n    })))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagination-menu\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }\n    }, this.createPagination())), /*#__PURE__*/React.createElement(FormView, {\n      searchBooks: this.searchBooks,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 9\n      }\n    }));\n  }\n}\nexport default App;","map":{"version":3,"names":["React","Component","$","FormView","Book","App","constructor","props","getBooks","ajax","url","state","page","type","success","result","setState","totalBooks","total_books","books","error","alert","deleteBook","id","window","confirm","changeRating","rating","targetBook","find","book","dataType","contentType","data","JSON","stringify","searchBooks","search","xhrFields","withCredentials","crossDomain","document","getElementById","reset","componentDidMount","selectPage","num","createPagination","pageNumbers","maxPage","Math","ceil","i","push","createElement","key","className","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","render","map","Object","assign"],"sources":["/Users/hayaaljuraysi/class-demo/bookshelf/frontend/src/App.js"],"sourcesContent":["import React, { Component } from 'react';\nimport $ from 'jquery';\n\nimport './stylesheets/App.css';\nimport FormView from './components/FormView';\nimport Book from './components/Book';\n\n\nclass App extends Component {\n  constructor(props){\n    super();\n    this.state = {\n      page: 1,\n      totalBooks: 0,\n      books: []\n    }\n  }\n\n  getBooks = () => {\n    $.ajax({\n      url: `/books?page=${this.state.page}`, //TODO: update request URL\n      type: \"GET\",\n      success: (result) => {\n        this.setState({\n          totalBooks: result.total_books,\n          books: result.books \n        })\n        return;\n      },\n      error: (error) => {\n        alert('Unable to load books. Please try your request again')\n        return;\n      }\n    })\n  }\n\n  deleteBook = (id) => {\n    if(window.confirm('Are you sure you want to delete the book?')) {\n      $.ajax({\n        url: `/books/${id}`, //TODO: update request URL\n        type: \"DELETE\",\n        success: (result) => {\n          this.getBooks();\n        },\n        error: (error) => {\n          alert('Unable to delete the book.')\n          return;\n        }\n      })\n    }\n  }\n\n  changeRating = (id, rating) => {\n    let books = [...this.state.books]\n    let targetBook = books.find((book) => book.id === id);\n\n    $.ajax({\n      url: `/books/${id}`, //TODO: update request URL\n      type: \"PATCH\",\n      dataType: 'json',\n      contentType: 'application/json',\n      data: JSON.stringify({'rating': rating}),\n      success: (result) => {\n        targetBook.rating = rating\n        this.setState({books})\n      },\n      error: (error) => {\n        alert('Unable to update the rating.')\n        return;\n      }\n    })\n  }\n\n  searchBooks = (search) => {\n    $.ajax({\n      url: '/books', //TODO: update request URL\n      type: \"POST\",\n      dataType: 'json',\n      contentType: 'application/json',\n      data: JSON.stringify({search: search}),\n      xhrFields: {\n        withCredentials: true\n      },\n      crossDomain: true,\n      success: (result) => {\n        this.setState({\n          totalBooks: result.total_books,\n          books: result.books,\n          page: 1\n        })\n        document.getElementById(\"search-form\").reset();\n        return;\n      },\n      error: (error) => {\n        alert('Unable to complete search. Please try your request again')\n        return;\n      }\n    })\n  }\n\n  \n  componentDidMount(){\n    this.getBooks()\n  }\n\n  selectPage(num) {\n    this.setState({page: num}, () => this.getBooks());\n  }\n\n  createPagination(){\n    let pageNumbers = [];\n    let maxPage = Math.ceil(this.state.totalBooks / 8)\n    for (let i = 1; i <= maxPage; i++) {\n      pageNumbers.push(\n        <div\n          key={i}\n          className={`page-num ${i === this.state.page ? 'active' : ''}`}\n          onClick={() => {this.selectPage(i)}}>{i}\n        </div>)\n    }\n    return pageNumbers;\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <div id=\"main-view\">\n          <div className=\"bookshelf-container\">\n            {this.state.books.map((book) => (\n              <Book\n                key={book.id}\n                deleteBook={this.deleteBook}\n                changeRating={this.changeRating}\n                {...book}\n              />\n            ))}\n          </div>\n          <div className=\"pagination-menu\">\n              {this.createPagination()}\n          </div>\n        </div>\n        <FormView searchBooks={this.searchBooks}/>\n      </div>\n    );\n\n  }\n}\n\nexport default App;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}